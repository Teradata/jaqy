Jaqy Console 1.0
-- 0/0 - 0 ----------------------------------------------------------------
--------------------------------------------------------------------------
-- expansion setting test
--------------------------------------------------------------------------
.set expansion
.set expansion on
-- 0/1 - 0 ----------------------------------------------------------------
.set expansion asdf
-- error: invalid setting value
-- 0/2 - 0 ----------------------------------------------------------------

.run ../common/sqlite_setup.sql
-- Running script: ../common/sqlite_setup.sql
-- 0/3 - 0 ----------------------------------------------------------------
.open sqlite::memory:
-- 0/4 - 0 ----------------------------------------------------------------

.script
var var1 = 'abc';
var var2 = 'def';
.end script
-- 0/5 - 0 ----------------------------------------------------------------

SELECT '${var1}' AS Test;
-- success --
Test
----
abc
-- activity count = 1
-- 1/5 - 0 ----------------------------------------------------------------
SELECT '${var2}' AS Test;
-- success --
Test
----
def
-- activity count = 1
-- 2/5 - 0 ----------------------------------------------------------------
SELECT '${var1 + var2}' AS Test;
-- success --
Test
------
abcdef
-- activity count = 1
-- 3/5 - 0 ----------------------------------------------------------------

.set expansion off
-- 3/6 - 0 ----------------------------------------------------------------
.set expansion
.set expansion off
-- 3/7 - 0 ----------------------------------------------------------------

SELECT '${var1}' AS Test;
-- success --
Test
-------
${var1}
-- activity count = 1
-- 4/7 - 0 ----------------------------------------------------------------
SELECT '${var2}' AS Test;
-- success --
Test
-------
${var2}
-- activity count = 1
-- 5/7 - 0 ----------------------------------------------------------------
SELECT '${var1 + var2}' AS Test;
-- success --
Test
--------------
${var1 + var2}
-- activity count = 1
-- 6/7 - 0 ----------------------------------------------------------------

.set expansion on
-- 6/8 - 0 ----------------------------------------------------------------
.set expansion
.set expansion on
-- 6/9 - 0 ----------------------------------------------------------------

SELECT '${var1}' AS Test;
-- success --
Test
----
abc
-- activity count = 1
-- 7/9 - 0 ----------------------------------------------------------------
SELECT '${var2}' AS Test;
-- success --
Test
----
def
-- activity count = 1
-- 8/9 - 0 ----------------------------------------------------------------
SELECT '${var1 + var2}' AS Test;
-- success --
Test
------
abcdef
-- activity count = 1
-- 9/9 - 0 ----------------------------------------------------------------

.close
-- 9/10 - 0 ---------------------------------------------------------------
