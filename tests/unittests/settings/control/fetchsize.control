Jaqy Console 1.2.0
-- 0/0 - 0 ----------------------------------------------------------------
--------------------------------------------------------------------------
-- fetchsize setting test
--------------------------------------------------------------------------
.set fetchsize
-- error: Current session is closed.
-- 0/1 - 0 ----------------------------------------------------------------

.run ../common/postgresql_setup.sql
-- Running script: ../common/postgresql_setup.sql
-- 0/2 - 0 ----------------------------------------------------------------
.open -u postgres postgresql://localhost/?stringtype=unspecified
-- 0/3 - 0 ----------------------------------------------------------------

.set fetchsize
.set fetchsize 0
-- 0/4 - 0 ----------------------------------------------------------------

CREATE TABLE TextTable
(
	a  INTEGER,
	c1 TEXT
);
-- success. update count = 0
-- 1/4 - 0 ----------------------------------------------------------------

INSERT INTO TextTable VALUES (1, '1');
-- success. update count = 1
-- 2/4 - 0 ----------------------------------------------------------------

.repeat 5
-- 2/5 - 0 ----------------------------------------------------------------
INSERT INTO TextTable
SELECT a + (SELECT max(a) FROM TextTable),
       c1 || (SELECT c1 FROM TextTable WHERE a = (SELECT max(a) FROM TextTable))
FROM TextTable;
-- iteration: 1
-- success. update count = 1
-- iteration: 2
-- success. update count = 2
-- iteration: 3
-- success. update count = 4
-- iteration: 4
-- success. update count = 8
-- iteration: 5
-- success. update count = 16
-- 3/5 - 0 ----------------------------------------------------------------

.set fetchsize -1
-- error: Fetch size cannot be negative.
-- 3/6 - 0 ----------------------------------------------------------------
.set fetchsize asdf
-- error: For input string: "asdf"
-- 3/7 - 0 ----------------------------------------------------------------
.set fetchsize 0
-- 3/8 - 0 ----------------------------------------------------------------
.set fetchsize 10
-- 3/9 - 0 ----------------------------------------------------------------
.set fetchsize
.set fetchsize 10
-- 3/10 - 0 ---------------------------------------------------------------
.format csv
-- 3/11 - 0 ---------------------------------------------------------------
SELECT * FROM TextTable ORDER BY a;
-- success --
a,c1
1,1
2,11
3,111
4,1111
5,11111
6,111111
7,1111111
8,11111111
9,111111111
10,1111111111
11,11111111111
12,111111111111
13,1111111111111
14,11111111111111
15,111111111111111
16,1111111111111111
17,11111111111111111
18,111111111111111111
19,1111111111111111111
20,11111111111111111111
21,111111111111111111111
22,1111111111111111111111
23,11111111111111111111111
24,111111111111111111111111
25,1111111111111111111111111
26,11111111111111111111111111
27,111111111111111111111111111
28,1111111111111111111111111111
29,11111111111111111111111111111
30,111111111111111111111111111111
31,1111111111111111111111111111111
32,11111111111111111111111111111111
-- activity count = 32
-- 4/11 - 0 ---------------------------------------------------------------

DROP TABLE TextTable;
-- success. update count = 0
-- 5/11 - 0 ---------------------------------------------------------------
.close
-- 5/12 - 0 ---------------------------------------------------------------
.run ../common/postgresql_setup.sql
-- Running script: ../common/postgresql_setup.sql
-- 5/13 - 0 ---------------------------------------------------------------
.open -u postgres postgresql://localhost/?stringtype=unspecified
-- 5/14 - 0 ---------------------------------------------------------------
.set fetchsize
.set fetchsize 0
-- 5/15 - 0 ---------------------------------------------------------------
.close
-- 5/16 - 0 ---------------------------------------------------------------
