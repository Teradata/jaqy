Jaqy Console 1.0
-- 0/0 - 0 ----------------------------------------------------------------
--------------------------------------------------------------------------
-- nullsort setting test
--------------------------------------------------------------------------
.set nullsort
.set nullsort low
-- 0/1 - 0 ----------------------------------------------------------------
.set nullsort asdf
-- error: invalid nullsort value.
-- 0/2 - 0 ----------------------------------------------------------------

.run ../common/postgresql_setup.sql
-- Running script: ../common/postgresql_setup.sql
-- 0/3 - 0 ----------------------------------------------------------------
.open -u postgres postgresql://localhost/?stringtype=unspecified
-- 0/4 - 0 ----------------------------------------------------------------

CREATE TABLE MyTable (a INTEGER, b VARCHAR(10000));
-- success. update count = 0
-- 1/4 - 0 ----------------------------------------------------------------

INSERT INTO MyTable VALUES (1, 'POINT(1 1)');
-- success. update count = 1
-- 2/4 - 0 ----------------------------------------------------------------
INSERT INTO MyTable VALUES (2, 'POINT(2 2)');
-- success. update count = 1
-- 3/4 - 0 ----------------------------------------------------------------
INSERT INTO MyTable VALUES (3, 'POINT(3 3)');
-- success. update count = 1
-- 4/4 - 0 ----------------------------------------------------------------
INSERT INTO MyTable VALUES (4, 'POINT(4 4)');
-- success. update count = 1
-- 5/4 - 0 ----------------------------------------------------------------
INSERT INTO MyTable VALUES (5, NULL);
-- success. update count = 1
-- 6/4 - 0 ----------------------------------------------------------------

.sort 2
-- 6/5 - 0 ----------------------------------------------------------------
SELECT * FROM MyTable ORDER BY a;
-- success --
a b
- ----------
5 ?
1 POINT(1 1)
2 POINT(2 2)
3 POINT(3 3)
4 POINT(4 4)
-- activity count = 5
-- 7/5 - 0 ----------------------------------------------------------------

.set nullsort low
-- 7/6 - 0 ----------------------------------------------------------------
.sort 2
-- 7/7 - 0 ----------------------------------------------------------------
SELECT * FROM MyTable ORDER BY a;
-- success --
a b
- ----------
5 ?
1 POINT(1 1)
2 POINT(2 2)
3 POINT(3 3)
4 POINT(4 4)
-- activity count = 5
-- 8/7 - 0 ----------------------------------------------------------------

.set nullsort high
-- 8/8 - 0 ----------------------------------------------------------------
.sort 2
-- 8/9 - 0 ----------------------------------------------------------------
SELECT * FROM MyTable ORDER BY a;
-- success --
a b
- ----------
1 POINT(1 1)
2 POINT(2 2)
3 POINT(3 3)
4 POINT(4 4)
5 ?
-- activity count = 5
-- 9/9 - 0 ----------------------------------------------------------------

DROP TABLE MyTable;
-- success. update count = 0
-- 10/9 - 0 ---------------------------------------------------------------

.close
-- 10/10 - 0 --------------------------------------------------------------
