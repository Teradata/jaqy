Jaqy Console 1.2.0
-- 0/0 - 0 ----------------------------------------------------------------
--------------------------------------------------------------------------
-- .export csv test
--------------------------------------------------------------------------
.run ../common/postgresql_setup.sql
-- Running script: ../common/postgresql_setup.sql
-- 0/1 - 0 ----------------------------------------------------------------
.open -u postgres postgresql://localhost/?stringtype=unspecified
-- 0/2 - 0 ----------------------------------------------------------------

CREATE TABLE xmlTable (a INTEGER, b XML);
-- success. update count = 0
-- 1/2 - 0 ----------------------------------------------------------------

INSERT INTO xmlTable VALUES (1, '<a>1</a>');
-- success. update count = 1
-- 2/2 - 0 ----------------------------------------------------------------
INSERT INTO xmlTable VALUES (2, '<a>2</a>');
-- success. update count = 1
-- 3/2 - 0 ----------------------------------------------------------------

.format csv
-- 3/3 - 0 ----------------------------------------------------------------
SELECT * FROM xmlTable ORDER BY a;
-- success --
a,b
1,<a>1</a>
2,<a>2</a>
-- activity count = 2
-- 4/3 - 0 ----------------------------------------------------------------

.export csv xml.csv
-- 4/4 - 0 ----------------------------------------------------------------
SELECT * FROM xmlTable ORDER BY a;
-- success --
-- activity count = 2
-- 5/4 - 0 ----------------------------------------------------------------

.os cat xml.csv
a,b
1,<a>1</a>
2,<a>2</a>
-- 5/5 - 0 ----------------------------------------------------------------
.os rm -f xml.csv
-- 5/6 - 0 ----------------------------------------------------------------

DROP TABLE xmlTable;
-- success. update count = 0
-- 6/6 - 0 ----------------------------------------------------------------

.close
-- 6/7 - 0 ----------------------------------------------------------------
