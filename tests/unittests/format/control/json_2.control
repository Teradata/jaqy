Jaqy Console 1.2.0
-- 0/0 - 0 ----------------------------------------------------------------
--------------------------------------------------------------------------
-- .format json test
--------------------------------------------------------------------------
.run ../common/postgresql_setup.sql
-- Running script: ../common/postgresql_setup.sql
-- 0/1 - 0 ----------------------------------------------------------------
.open -u postgres postgresql://localhost/?stringtype=unspecified
-- 0/2 - 0 ----------------------------------------------------------------

-- Test array
CREATE TABLE ArrTable (a INT, b INT[]);
-- success. update count = 0
-- 1/2 - 0 ----------------------------------------------------------------

INSERT INTO ArrTable VALUES (1, NULL);
-- success. update count = 1
-- 2/2 - 0 ----------------------------------------------------------------
INSERT INTO ArrTable VALUES (2, '{}');
-- success. update count = 1
-- 3/2 - 0 ----------------------------------------------------------------
INSERT INTO ArrTable VALUES (3, '{1}');
-- success. update count = 1
-- 4/2 - 0 ----------------------------------------------------------------
INSERT INTO ArrTable VALUES (4, '{1,2}');
-- success. update count = 1
-- 5/2 - 0 ----------------------------------------------------------------
INSERT INTO ArrTable VALUES (5, '{1,2,3}');
-- success. update count = 1
-- 6/2 - 0 ----------------------------------------------------------------

.format json
-- 6/3 - 0 ----------------------------------------------------------------
SELECT * FROM ArrTable ORDER BY a;
-- success --
[
	{
		"a" : 1,
		"b" : null
	},
	{
		"a" : 2,
		"b" : []
	},
	{
		"a" : 3,
		"b" : [
			1
		]
	},
	{
		"a" : 4,
		"b" : [
			1,
			2
		]
	},
	{
		"a" : 5,
		"b" : [
			1,
			2,
			3
		]
	}
]
-- activity count = 5
-- 7/3 - 0 ----------------------------------------------------------------

DROP TABLE ArrTable;
-- success. update count = 0
-- 8/3 - 0 ----------------------------------------------------------------

CREATE TABLE ArrTable (a INT, b INT[][]);
-- success. update count = 0
-- 9/3 - 0 ----------------------------------------------------------------

INSERT INTO ArrTable VALUES (1, NULL);
-- success. update count = 1
-- 10/3 - 0 ---------------------------------------------------------------
INSERT INTO ArrTable VALUES (2, '{}');
-- success. update count = 1
-- 11/3 - 0 ---------------------------------------------------------------
INSERT INTO ArrTable VALUES (3, '{1}');
-- success. update count = 1
-- 12/3 - 0 ---------------------------------------------------------------
INSERT INTO ArrTable VALUES (4, '{1,2}');
-- success. update count = 1
-- 13/3 - 0 ---------------------------------------------------------------
INSERT INTO ArrTable VALUES (5, '{1,2,3}');
-- success. update count = 1
-- 14/3 - 0 ---------------------------------------------------------------

.format json
-- 14/4 - 0 ---------------------------------------------------------------
SELECT * FROM ArrTable ORDER BY a;
-- success --
[
	{
		"a" : 1,
		"b" : null
	},
	{
		"a" : 2,
		"b" : []
	},
	{
		"a" : 3,
		"b" : [
			1
		]
	},
	{
		"a" : 4,
		"b" : [
			1,
			2
		]
	},
	{
		"a" : 5,
		"b" : [
			1,
			2,
			3
		]
	}
]
-- activity count = 5
-- 15/4 - 0 ---------------------------------------------------------------

DROP TABLE ArrTable;
-- success. update count = 0
-- 16/4 - 0 ---------------------------------------------------------------

.close
-- 16/5 - 0 ---------------------------------------------------------------

