Teradata Jaqy Console 1.0
-- 0/0 - 0 ----------------------------------------------------------------
--------------------------------------------------------------------------
-- test JSON binary outputs etc
--------------------------------------------------------------------------

.run ../common/sqlite_setup.sql
-- Running script: ../common/sqlite_setup.sql
-- 0/1 - 0 ----------------------------------------------------------------
.open sqlite::memory:
-- 0/2 - 0 ----------------------------------------------------------------

CREATE TABLE BinTable
(
        a       INTEGER,
        b       BLOB
);
-- success. update count = 0
-- 1/2 - 0 ----------------------------------------------------------------

INSERT INTO BinTable VALUES (1, X'DEADBEEF');
-- success. update count = 1
-- 2/2 - 0 ----------------------------------------------------------------
INSERT INTO BinTable VALUES (2, X'FACEDEAD');
-- success. update count = 1
-- 3/2 - 0 ----------------------------------------------------------------

.export json
-- error: missing file name.
-- 3/3 - 0 ----------------------------------------------------------------
.export json -b dummy
-- error: invalid binary option value: dummy
-- 3/4 - 0 ----------------------------------------------------------------
.export json -f dummy
-- error: invalid format option value: dummy
-- 3/5 - 0 ----------------------------------------------------------------
.export json -f text -b base64 -p off bin.json
-- 3/6 - 0 ----------------------------------------------------------------
SELECT * FROM BinTable ORDER BY a;
-- success --
-- activity count = 2
-- 4/6 - 0 ----------------------------------------------------------------

.os diff -b bin.json lib/bin.json
-- 4/7 - 0 ----------------------------------------------------------------
.os rm -f bin.json
-- 4/8 - 0 ----------------------------------------------------------------

.close
Session 0 is now closed.
-- 4/9 - 0 ----------------------------------------------------------------
