Jaqy Console 1.0
-- 0/0 - 0 ----------------------------------------------------------------
--------------------------------------------------------------------------
-- Transaction test
--------------------------------------------------------------------------
.run setup.sql
-- Running script: setup.sql
-- 0/1 - 0 ----------------------------------------------------------------
.classpath teradata lib/tdgssconfig.jar:lib/terajdbc4.jar
-- 0/2 - 0 ----------------------------------------------------------------
.open -u dbc -p dbc teradata://127.0.0.1/CHARSET=UTF8
-- 0/3 - 0 ----------------------------------------------------------------
.autocommit off
-- 0/4 - 0 ----------------------------------------------------------------

CREATE DATABASE vagrant AS PERM=1e8;
-- success. update count = 0
-- 1/4 - 0 ----------------------------------------------------------------
ET;
-- success. update count = 0
-- 2/4 - 0 ----------------------------------------------------------------
DATABASE vagrant;
-- success. update count = 0
-- 3/4 - 0 ----------------------------------------------------------------
ET;
-- success. update count = 0
-- 4/4 - 0 ----------------------------------------------------------------

CREATE TABLE MyTable
(
	a	INTEGER,
	b	VARCHAR(200)
);
-- success. update count = 0
-- 5/4 - 0 ----------------------------------------------------------------
ET;
-- success. update count = 0
-- 6/4 - 0 ----------------------------------------------------------------

BT;
-- success. update count = 0
-- 7/4 - 0 ----------------------------------------------------------------
INSERT INTO MyTable VALUES (1, '1');
-- success. update count = 1
-- 8/4 - 0 ----------------------------------------------------------------
INSERT INTO MyTable VALUES (2, '2');
-- success. update count = 1
-- 9/4 - 0 ----------------------------------------------------------------
INSERT INTO MyTable VALUES (3, '3');
-- success. update count = 1
-- 10/4 - 0 ---------------------------------------------------------------
INSERT INTO MyTable VALUES (4, '4');
-- success. update count = 1
-- 11/4 - 0 ---------------------------------------------------------------
INSERT INTO MyTable VALUES (5, '5');
-- success. update count = 1
-- 12/4 - 0 ---------------------------------------------------------------
ET;
-- success. update count = 0
-- 13/4 - 0 ---------------------------------------------------------------

SELECT * FROM MyTable ORDER BY a, b;
-- success --
a b
- -
1 1
2 2
3 3
4 4
5 5
-- activity count = 5
-- 14/4 - 0 ---------------------------------------------------------------
ET;
-- success. update count = 0
-- 15/4 - 0 ---------------------------------------------------------------

BT;
-- success. update count = 0
-- 16/4 - 0 ---------------------------------------------------------------
DELETE FROM MyTable WHERE a > 2;
-- success. update count = 3
-- 17/4 - 0 ---------------------------------------------------------------
SELECT * FROM MyTable ORDER BY a, b;
-- success --
a b
- -
1 1
2 2
-- activity count = 2
-- 18/4 - 0 ---------------------------------------------------------------
ROLLBACK;
-- failure 3514: [HY008] [Teradata Database] [TeraJDBC 16.00.00.32] [Error 3514] [SQLState HY008] User-generated transaction ABORT.
-- 19/4 - 0 ---------------------------------------------------------------

SELECT * FROM MyTable ORDER BY a, b;
-- success --
a b
- -
1 1
2 2
3 3
4 4
5 5
-- activity count = 5
-- 20/4 - 0 ---------------------------------------------------------------
ET;
-- success. update count = 0
-- 21/4 - 0 ---------------------------------------------------------------

DELETE DATABASE vagrant;
-- success. update count = 0
-- 22/4 - 0 ---------------------------------------------------------------
ET;
-- success. update count = 0
-- 23/4 - 0 ---------------------------------------------------------------
DROP DATABASE vagrant;
-- success. update count = 0
-- 24/4 - 0 ---------------------------------------------------------------
ET;
-- success. update count = 0
-- 25/4 - 0 ---------------------------------------------------------------

.close
Session 0 is now closed.
-- 25/5 - 0 ---------------------------------------------------------------
